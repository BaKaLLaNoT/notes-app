(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{28:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(23),a=n.n(c),o=(n(28),n(9)),s=n(2),i=n(6),u=n.n(i),l=n(8),j=n(14),b=n(3),d=n(1),h=function(e){var t=e.note,n=e.toggleImportance,r=t.important?"make not important":"make important";return Object(d.jsxs)("li",{className:"note",children:[t.content,Object(d.jsx)("button",{onClick:n,children:r})]})},O=function(e){var t=e.message;return null===t?null:Object(d.jsx)("div",{className:"error",children:t})},f=Object(r.forwardRef)((function(e,t){var n=e.children,c=e.buttonLabel,a=Object(r.useState)(!1),o=Object(b.a)(a,2),s=o[0],i=o[1],u={display:s?"none":""},l={display:s?"":"none"},j=function(){return i(!s)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:j}})),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{style:u,children:Object(d.jsx)("button",{onClick:j,children:c})}),Object(d.jsxs)("div",{style:l,children:[n,Object(d.jsx)("button",{onClick:j,children:"Cancel"})]})]})}));f.displayName="Togglable";var p=f;function m(e){var t=e.username,n=e.password,r=e.handlePasswordChange,c=e.handleSubmit,a=e.handleUsernameChange;return Object(d.jsx)(p,{buttonLabel:"Show Login",children:Object(d.jsxs)("form",{onSubmit:c,children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",value:t,name:"Username",placeholder:"Username",onChange:a})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"password",value:n,name:"Password",placeholder:"Password",onChange:r})}),Object(d.jsx)("button",{id:"form-login-button",children:"Login"})]})})}function x(e){var t=e.addNote,n=e.handleLogout,c=Object(r.useState)(""),a=Object(b.a)(c,2),o=a[0],s=a[1],i=Object(r.useRef)();return Object(d.jsxs)(p,{buttonLabel:"New Note",ref:i,children:[Object(d.jsx)("h3",{children:"Create a new note"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({content:o,important:!1}),s(""),i.current.toggleVisibility()},children:[Object(d.jsx)("input",{placeholder:"Write your note content",value:o,onChange:function(e){s(e.target.value)}}),Object(d.jsx)("button",{type:"submit",children:"save"})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:n,children:"Logout"})})]})}var v=n(7),g=n.n(v),w="/api/notes",y=null,S=function(){return g.a.get(w).then((function(e){return e.data}))},k=function(e){var t={headers:{Authorization:y}};return g.a.post(w,e,t).then((function(e){return e.data}))},N=function(e,t){var n={headers:{Authorization:y}};return g.a.put("".concat(w,"/").concat(e),t,n).then((function(e){return e.data}))},C=function(e){y="Bearer ".concat(e)},U=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={login:U},I=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),o=Object(b.a)(a,2),s=o[0],i=o[1],f=Object(r.useState)(null),p=Object(b.a)(f,2),v=p[0],g=p[1],w=Object(r.useState)(""),y=Object(b.a)(w,2),U=y[0],I=y[1],A=Object(r.useState)(""),P=Object(b.a)(A,2),J=P[0],E=P[1],H=Object(r.useState)(null),T=Object(b.a)(H,2),z=T[0],B=T[1];Object(r.useEffect)((function(){S().then((function(e){c(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);B(t),C(t.token)}}),[]);var D=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,L.login({username:U,password:J});case 4:n=e.sent,console.log(n),window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(n)),C(n.token),B(n),I(""),E(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),g("Wrong credentials!"),setTimeout((function(){g(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(null),C(z.token),window.localStorage.removeItem("loggedNoteAppUser");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=s?n:n.filter((function(e){return e.important}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Notes"}),Object(d.jsx)(O,{message:v}),z?Object(d.jsx)(x,{addNote:function(e){k(e).then((function(e){c(n.concat(e))}))},handleLogout:R}):Object(d.jsx)(m,{username:U,password:J,handleUsernameChange:function(e){var t=e.target;return I(t.value)},handlePasswordChange:function(e){var t=e.target;return E(t.value)},handleSubmit:D}),Object(d.jsx)("div",{children:Object(d.jsxs)("button",{onClick:function(){return i(!s)},children:["show ",s?"important":"all"]})}),Object(d.jsx)("ul",{children:V.map((function(e,t){return Object(d.jsx)(h,{note:e,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),r=Object(j.a)(Object(j.a)({},t),{},{important:!t.important});N(e,r).then((function(t){c(n.map((function(n){return n.id!==e?n:t})))})).catch((function(){g("Note '".concat(t.content,"' was already removed from server")),setTimeout((function(){g(null)}),5e3)}))}(e.id)}},t)}))})]})},A=function(){return Object(d.jsx)("h1",{children:"Home Page"})},P=function(){return Object(d.jsx)("h1",{children:"Users"})},J=function(){var e={padding:5};return Object(d.jsxs)(o.a,{children:[Object(d.jsxs)("header",{children:[Object(d.jsx)(o.b,{to:"/",style:e,children:"Home"}),Object(d.jsx)(o.b,{to:"/notes",style:e,children:"Notes"}),Object(d.jsx)(o.b,{to:"/users",style:e,children:"Users"})]}),Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{path:"/notes",element:Object(d.jsx)(I,{})}),Object(d.jsx)(s.a,{path:"/users",element:Object(d.jsx)(P,{})}),Object(d.jsx)(s.a,{path:"/",element:Object(d.jsx)(A,{})})]})]})};a.a.render(Object(d.jsx)(J,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.6b8da70e.chunk.js.map